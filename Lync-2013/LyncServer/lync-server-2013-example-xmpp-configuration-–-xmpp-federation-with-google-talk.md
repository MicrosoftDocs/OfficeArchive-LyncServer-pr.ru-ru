---
title: Пример конфигурации XMPP – федерация XMPP с Google Talk
description: Пример настройки XMPP – XMPP Federation в Google поговорить.
ms.reviewer: ''
ms.author: serdars
author: serdarsoysal
manager: serdars
audience: admin
f1.keywords:
- NOCSH
TOCTitle: Example XMPP configuration – XMPP federation with Google Talk
ms:assetid: 360a2f7b-015b-4e93-ac67-0f609c21f1a2
ms:mtpsurl: https://technet.microsoft.com/en-us/library/JJ204807(v=OCS.15)
ms:contentKeyID: 48183848
ms.date: 07/23/2014
mtps_version: v=OCS.15
ms.openlocfilehash: e6ea920fad0344e784aac104ab5528d89b90f47b
ms.sourcegitcommit: 36fee89bb887bea4f18b19f17a8c69daf5bc423d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/26/2020
ms.locfileid: "49428454"
---
# <a name="example-xmpp-configuration-in-lync-server-2013--xmpp-federation-with-google-talk"></a>Пример конфигурации XMPP в Lync Server 2013 — федерация XMPP с Google Talk

<div data-xmlns="http://www.w3.org/1999/xhtml">

<div class="topic" data-xmlns="http://www.w3.org/1999/xhtml" data-msxsl="urn:schemas-microsoft-com:xslt" data-cs="https://msdn.microsoft.com/">

<div data-asp="https://msdn2.microsoft.com/asp">



</div>

<div id="mainSection">

<div id="mainBody">

<span> </span>

_**Тема последнего изменения:** 2014-04-22_

Пример конфигурации для развертывания прокси-сервера XMPP определяет Федерацию с использованием Google разговора.

<div>

## <a name="example-xmpp-configuration--xmpp-federation-with-google-talk"></a>Пример конфигурации XMPP – федерация XMPP с Google Talk

1.  На сервере переднего плана откройте мастер развертывания Lync Server. Щелкните **Установка** или **обновление операционной системы Lync Server**, а затем нажмите кнопку **Настройка** или **удалите компоненты Lync Server**. Нажмите кнопку **выполнить еще раз**.

2.  В разделе **Настройка серверных компонентов Lync** нажмите кнопку **Далее**. На экране сводки будут показаны действия по мере их выполнения. После завершения развертывания щелкните **Просмотреть журнал** , чтобы просмотреть доступные файлы журнала. Нажмите кнопку **Готово** , чтобы завершить развертывание.

3.  На пограничном сервере откройте мастер развертывания Lync Server. Щелкните **Установка** или **обновление операционной системы Lync Server**, а затем нажмите кнопку **Настройка** или **удалите компоненты Lync Server**. Нажмите кнопку **выполнить еще раз**.

4.  Добавьте Google поговорить в качестве XMPP разрешенного партнера. В настоящее время Google поговорить поддерживает только нешифрованные подключения по протоколу TCP для сервера федерации XMPP и поддерживает только Dialback сервера для проверки личности. (См <http://xmpp.org/extensions/xep-0220.html> .).
    
        New-CsXmppAllowedPartner gmail.com -TlsNegotiation NotSupported -SaslNegotiation NotSupported -EnableKeepAlive $false -SupportDialbackNegotiation $true

5.  Чтобы включить пограничный Федерацию, введите следующую команду:
    
        Set-CsAccessEdgeConfiguration -AllowFederatedUsers $true

6.  В разделе **Настройка серверных компонентов Lync** нажмите кнопку **Далее**. На экране сводки будут показаны действия по мере их выполнения. После завершения развертывания щелкните **Просмотреть журнал** , чтобы просмотреть доступные файлы журнала. Нажмите кнопку **Готово** , чтобы завершить развертывание.

7.  На пограничном сервере в мастере развертывания Lync Server рядом с **шагом 3: запрос, установка и назначение сертификатов** нажмите кнопку **выполнить еще раз**.
    
    <div>
    

    > [!TIP]
    > Если пограничный сервер развертывается в первый раз, вместо повторного запуска вы увидите "запустить".

    
    </div>

8.  На странице **Доступные задачи сертификатов** щелкните команду **Создать новый запрос сертификата**.

9.  На странице **запроса сертификата** выберите **внешний Граничный сертификат**.

10. На странице **отложенный или немедленный запрос** установите флажок **подготовить запрос сейчас, но отправить позже** .

11. На странице " **файл запроса сертификата** " введите полный путь и имя файла, в который нужно сохранить запрос (например, c: \\ CERT \_ exernal \_ Edge. cer).

12. На странице " **Укажите другой шаблон сертификата** ", чтобы использовать шаблон, отличный от шаблона веб-сервера по умолчанию, установите флажок **использовать альтернативный шаблон сертификата для выбранного центра сертификации** .

13. На странице **имя и параметры безопасности** выполните указанные ниже действия.
    
    1.  В поле **понятное имя** введите отображаемое имя сертификата.
    
    2.  В качестве **битовой длины** укажите длину в битах (обычно это значение по умолчанию — **2048**).
    
    3.  Убедитесь, что установлен флажок " **помечать закрытый ключ сертификата как экспортируемый** "

14. На странице " **сведения об организации** " введите имя Организации и организационное подразделение (например, "подразделение" или "Отдел")

15. На странице **сведения о географическом** расположении укажите сведения о местоположении.

16. На странице **имя субъекта/альтернативная тема** отображается информация, которая будет автоматически заполнена мастером. Если требуются дополнительные альтернативные имена субъектов, их можно указать в следующих двух шагах.

17. В **параметрах домена SIP на странице "альтернативные имена тем" (SAN)** установите флажок домен, чтобы добавить SIP. \<sipdomain\> элемент в список альтернативных имен субъектов.

18. На странице **Настройка дополнительных имен для других тем** укажите необходимые дополнительные имена субъектов.
    
    <div>
    

    > [!TIP]
    > Если установлен прокси-сервер XMPP, по умолчанию доменное имя (например, contoso.com) заполнено в записях сети SAN. Если вам нужны дополнительные элементы, добавьте их на этом этапе.

    
    </div>

19. На странице **сводки запроса** ознакомьтесь со сведениями о сертификате, которые будут использоваться для создания запроса.

20. После завершения выполнения команд можно **Просмотреть журнал** или нажать кнопку **Далее** , чтобы продолжить.

21. На странице " **файл запроса на сертификат** " можно просмотреть созданный файл запроса на подписывание сертификата (CSR), щелкнув **Просмотреть** или выйти из мастера сертификатов, нажав кнопку **Готово**.

22. Скопируйте файл запроса и отправьте его в общедоступный центр сертификации.

23. После получения, импорта и назначения общедоступного сертификата вы должны остановить и перезапустить службы пограничного сервера. Запустите командную консоль Lync Server Management Shell: нажмите кнопку **Пуск**, выберите **все программы**, а затем — **Microsoft Lync Server 2013**, а затем — **Командная консоль Lync Server Management Shell**... В командной консоли Lync Server введите:
    ```
        Stop-CsWindowsService
    ```
    
    ```
        Start-CsWindowsService
    ```
    
24. Чтобы настроить DNS для XMPP Федерации, добавьте следующую запись SRV для внешнего DNS: \_ XMPP-Server. \_ Номера.\<domain name\> SRV-запись будет разрешаться для полного доменного имени Edge-сервера, при этом значение порта 5269

25. Настройте новую политику внешнего доступа, чтобы включить всех пользователей, открыв командную консоль Lync Server Management Shell на сервере переднего плана и введя:
    
        New-CsExternalAccessPolicy -Identity FedPic -EnableFederationAccess $true -EnablePublicCloudAccess $true
        Get-CsUser | Grant-CsExternalAccessPolicy -PolicyName FedPic

</div>

</div>

<span> </span>

</div>

</div>

</div>

