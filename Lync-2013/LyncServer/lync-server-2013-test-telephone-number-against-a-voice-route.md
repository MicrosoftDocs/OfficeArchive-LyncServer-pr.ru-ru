---
title: 'Lync Server 2013: Проверка номера телефона на маршруте голосовой связи'
description: 'Lync Server 2013: Проверка номера телефона на маршруте голосовой связи.'
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
f1.keywords:
- NOCSH
TOCTitle: Test telephone number against a voice route
ms:assetid: 9a77ed6d-9394-4bef-9344-3d91b6959b97
ms:mtpsurl: https://technet.microsoft.com/en-us/library/Dn725211(v=OCS.15)
ms:contentKeyID: 63969631
ms.date: 01/27/2015
manager: serdars
mtps_version: v=OCS.15
ms.openlocfilehash: 789f4a538a992a72abf61f4c1fbdb98370f2e643
ms.sourcegitcommit: 36fee89bb887bea4f18b19f17a8c69daf5bc423d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/26/2020
ms.locfileid: "49444240"
---
# <a name="test-telephone-number-against-a-voice-route-in-lync-server-2013"></a>Проверка номера телефона на маршруте голосовой связи в Lync Server 2013

<div data-xmlns="http://www.w3.org/1999/xhtml">

<div class="topic" data-xmlns="http://www.w3.org/1999/xhtml" data-msxsl="urn:schemas-microsoft-com:xslt" data-cs="https://msdn.microsoft.com/">

<div data-asp="https://msdn2.microsoft.com/asp">



</div>

<div id="mainSection">

<div id="mainBody">

<span> </span>

_**Тема последнего изменения:** 2014-05-20_


<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><p>Расписание проверки</p></td>
<td><p>Ежемесячно</p></td>
</tr>
<tr class="even">
<td><p>Средство тестирования</p></td>
<td><p>Windows PowerShell</p></td>
</tr>
<tr class="odd">
<td><p>Требуемые разрешения</p></td>
<td><p>При локальном запуске с помощью командной консоли Lync Server пользователи должны быть членами группы безопасности RTCUniversalServerAdmins.</p>
<p>При запуске с помощью удаленного экземпляра Windows PowerShell пользователям должна быть назначена роль RBAC, имеющая разрешение на запуск командлета Test-CsVoiceRoute. Чтобы просмотреть список всех ролей RBAC, которые могут использовать этот командлет, выполните в командной строке Windows PowerShell следующую команду:</p>
<p><code>Get-CsAdminRole | Where-Object {$_.Cmdlets -match &quot;Test-CsVoiceRoute&quot;}</code></p></td>
</tr>
</tbody>
</table>


<div>

## <a name="description"></a>Описание

Голосовые маршруты работают вместе с голосовыми политиками, помогающие перенаправлять голосовые звонки в сеть PSTN. Каждый маршрут голосовой связи содержит регулярное выражение (шаблон номера), который определяет номера телефонов, которые будут маршрутизироваться по данному голосовому маршруту. маршрут сможет обрабатывать любые телефонные номера, соответствующие этому регулярному выражению. Например, голосовой маршрут может иметь регулярное выражение, которое позволяет ему обрабатывать любое 10-значное число. Это означает, что маршрут сможет обработать номер телефона, например:

  - 2065551219

Маршрут не может обрабатывать одно из следующих двух чисел, оба из которых содержат 10 цифр:

  - 5551219

  - 12065551219

Командлет Test-CsVoiceRoute проверяет, может ли указанный голосовой маршрут перенаправлять указанный номер телефона.

</div>

<div>

## <a name="running-the-test"></a>Выполнение теста

Проверка возможности маршрута голоса к указанному номеру телефона состоит из двух этапов. Прежде всего необходимо использовать командлет Get-CsVoiceRoute, чтобы возвращать экземпляр маршрута голосовой связи, а затем использовать командлет Test-CsVoiceRoute, чтобы проверить, может ли этот маршрут обрабатывать целевой номер телефона. Например, эта команда проверяет, может ли голосовой маршрут RedmondVoiceRoute перенаправлять номер телефона 2065551219:

`Get-CsVoiceRoute -Identity "RedmondVoiceRoute" | Test-CsVoiceRoute -TargetNumber "2065551219"`

Обратите внимание на то, что номер телефона должен вводиться так, как ожидается, что пользователи будут набирать этот номер. Например, если вы не предполагаете, что пользователи должны включать код страны и города при наборе номера, используйте синтаксис, подобный приведенному ниже.

`-TargetNumber "5551219"`

В этом случае целевой номер выходит из кода страны и кода города.

Чтобы использовать одну команду для проверки всех голосовых маршрутов по указанному целевому номеру, используйте следующий синтаксис:

`Get-CsVoiceRoute | Test-CsVoiceRoute -TargetNumber "2065551219"`

Дополнительные сведения можно найти в справочной документации по командлету Test-CsVoiceRoute.

</div>

<div>

## <a name="determining-success-or-failure"></a>Определение успеха или сбоя

Если маршрут голосовой связи может перенаправлять целевой номер телефона, командлет Test-CsVoiceRoute просто возвращает значение true:

MatchesPattern

\--------------

Верно

Это означает, что маршрут может обрабатывать номера, аналогичные целевому номеру. Если голосовой маршрут не может обработать целевой номер, Test-CsVoiceRoute возвращает значение ложь.

MatchesPattern

\--------------

False

</div>

<div>

## <a name="reasons-why-the-test-might-have-failed"></a>Причины, по которым может произойти сбой теста

При тестировании голосовых маршрутов "сбой" — это относительный термин. В этом случае это не означает, что маршрут является "разорванным"; вместо этого он просто означает, что маршрут не может обработать целевой номер. Это может быть вызвано неправильным настройкам голосового маршрута. Это также может означать, что маршрут не предназначался для обработки чисел с помощью этого шаблона. Например, если вы не хотите перенаправлять звонки в другие страны по определенному маршруту, этот маршрут можно настроить таким образом, чтобы он отклонил все номера телефонов, включающие код страны. Если Test-CsVoiceRoute возвращает значение ложь, если предполагается, что оно возвращает значение истина, убедитесь, что конечный номер введен правильно. Если вы сделали это, для просмотра NumberPattern, настроенного для маршрута, используйте следующую команду:

`Get-CsVoiceRoute -Identity "RedmondVoiceRoute" | Select-Object NumberPattern`

</div>

<div>

## <a name="see-also"></a>См. также


[Test-CsVoiceRoute](https://docs.microsoft.com/powershell/module/skype/Test-CsVoiceRoute)  
  

</div>

</div>

<span> </span>

</div>

</div>

</div>

